<!doctype html>
 
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    
    <title>{title}</title>
    <meta name="description" content="${description}" />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/riot/3.0.1/riot+compiler.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.js'></script>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
    
    <style>{style}</style>
  </head>
  <body>
    <!-- ユーザー定義のタグをここに展開 -->
    <app title='HARVEST ANT!'></app>

    <!-- app タグを定義 -->
    <script type="riot/tag">
      <app>
        <!-- layout -->
        <h1 class="white-text grey darken-4">{title}</h1>
        
        <ul class="collection with-header" each='{rss}'>
          <li class="collection-header teal lighten-3">{siteName}</li>
          <li each='{feedList}'>
            <a href='{url}' class="collection-item" target="_blank"> {title} </a>
          </li>
        </ul>

        <!-- style -->
        <style>
        h1 {
          margin-top: 0%;
        }
        ul {
          margin: 0;
          padding: 0;
        }
        li {
          margin-bottom: 4px;
        }
        </style>
        
        <!-- logic -->
        this.rss = [];
        this.title = opts.title;
        $.get('http://localhost:3030/harvest').done(function(res) {
          this.rss = res;console.log(res);
          this.update();
        }.bind(this));
      </app>
    </script>
    
    <script>
      // マウント
      riot.mount('*');
    </script>
  </body>
</html>